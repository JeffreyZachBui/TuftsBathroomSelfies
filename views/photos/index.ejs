<% layout('../layouts/default') %>

<header class="sticky row">
  <div class="col-sm-12 col-md-10 col-md-offset-1">
    <a href="#" class="logo">Tufts Bathroom Selfies</a>
    <a href="#" class="button">Home</a>
    <a href="#" class="button">My Selfies</a>
    <a href="#" class="button">Bathrooms at Tufts</a>
  </div>
</header>

<div id="googleMap" style="width:100%;height:400px;"></div>

<div class="info">
  <p>
    All of the images you see here are transformed and served by Cloudinary. 
    For instance, the logo and the poster frame. 
    These two pictures weren't even have to be uploaded to Cloudinary, they are retrieved by the service, transformed, cached and distributed through a CDN.
  </p>

<div class="actions">
  <a class="upload_link" href="/photos/add">Add photo</a>
</div>
   
<div class="photos">
  <% if ( photos.length==0 ) { %>
    <p>No photos were added yet.</p>
  <% } else { %>
    <ul>
      <% for(var i=0; i<photos.length; i++) {%>
        <% var photo =  photos[i] ; %>
        <div class="photo">
          <h2><%= photo.title %></h2>
          <a href="<%= cloudinary.url(photo.image.public_id)%>" target="_blank">
            <%-cloudinary.image(photo.image.public_id, {width: 150, height: 150, quality: 80,format:'jpg',class:'thumbnail inline'})%>
          </a>

          <div class="less_info">
            <a href="#" class="toggle_info">Show transformations</a>
          </div>

          <div class="more_info">
            <a href="#" class="toggle_info">Hide transformations</a>
            <table class="thumbnails">
              <% var transformations = [
                { crop : "fill", radius : 10, height : 150, width : 150 },
                { crop : "scale", height : 150, width : 150 },
                { crop : "fit", height : 150, width : 150 },
                { crop : "thumb", gravity : "face", height : 150, width : 150 },
                { format : "png", angle : 20, transformation : { 
                  crop : "fill", gravity : "north", effect : "sepia", height : 150, width : 150 } }
              ] %>
            <% transformations.forEach(function(image_params) {%>

              <td>
                <div class="thumbnail_holder">
                  <a target="_blank" href="<%=cloudinary.url(photo.image.public_id,image_params)%>" > 
                    <img src="<%=cloudinary.url(photo.image.public_id,image_params)%>" class="thumbnail inline"/>
                  </a>
                </div>
                <table class="info">
                  <% for (var key in image_params){%>
                    <tr>
                      <td><%= key %></td>
                      <td><%= JSON.stringify(image_params[key]) %></td>
                    </tr>
                  <% } %>  
                </table>
                <br/>
              </td>
            <% }) %>
          </table>
          <div class="note">              
            Take a look at our documentation of <a href="http://cloudinary.com/documentation/image_transformations" target="_blank">Image Transformations</a> for a full list of supported transformations.
          </div>  
        </div>
      </div>

    <% } %>
  </ul>
<% } %>
</div>

    <div id="logo">
      <!-- This will render the image fetched from a remote HTTP URL using Cloudinary -->
      <img alt="Logo" src="<%=cloudinary.url('https://upload.wikimedia.org/wikipedia/commons/6/6f/Tufts_University_logo.png', {type:'fetch'})%>" />
    </div>

</div>
<footer class="row">
  <div class="col-sm-12 col-md-10 col-md-offset-1">
    Copyright &copy; Sheehan & Bui Partners LLC. 2018
  </div>
</footer>

